{
  "name": "Twitter",
  "key": "twitter",
  "iconUrl": "{BASE_URL}/apps/twitter/assets/favicon.svg",
  "docUrl": "https://automatisch.io/docs/twitter",
  "primaryColor": "2DAAE1",
  "supportsConnections": true,
  "fields": [
    {
      "key": "oAuthRedirectUrl",
      "label": "OAuth Redirect URL",
      "type": "string",
      "required": true,
      "readOnly": true,
      "value": "{WEB_APP_URL}/app/twitter/connections/add",
      "placeholder": null,
      "description": "When asked to input an OAuth callback or redirect URL in Twitter OAuth, enter the URL above.",
      "docUrl": "https://automatisch.io/docs/twitter#oauth-redirect-url",
      "clickToCopy": true
    },
    {
      "key": "consumerKey",
      "label": "API Key",
      "type": "string",
      "required": true,
      "readOnly": false,
      "value": null,
      "placeholder": null,
      "description": null,
      "docUrl": "https://automatisch.io/docs/twitter#consumer-key",
      "clickToCopy": false
    },
    {
      "key": "consumerSecret",
      "label": "API Secret",
      "type": "string",
      "required": true,
      "readOnly": false,
      "value": null,
      "placeholder": null,
      "description": null,
      "docUrl": "https://automatisch.io/docs/twitter#consumer-secret",
      "clickToCopy": false
    }
  ],
  "authenticationSteps": [
    {
      "step": 1,
      "type": "mutation",
      "name": "createConnection",
      "arguments": [
        {
          "name": "key",
          "value": "{key}"
        },
        {
          "name": "formattedData",
          "value": null,
          "properties": [
            {
              "name": "consumerKey",
              "value": "{fields.consumerKey}"
            },
            {
              "name": "consumerSecret",
              "value": "{fields.consumerSecret}"
            }
          ]
        }
      ]
    },
    {
      "step": 2,
      "type": "mutation",
      "name": "createAuthData",
      "arguments": [
        {
          "name": "id",
          "value": "{createConnection.id}"
        }
      ]
    },
    {
      "step": 3,
      "type": "openWithPopup",
      "name": "openAuthPopup",
      "arguments": [
        {
          "name": "url",
          "value": "{createAuthData.url}"
        }
      ]
    },
    {
      "step": 4,
      "type": "mutation",
      "name": "updateConnection",
      "arguments": [
        {
          "name": "id",
          "value": "{createConnection.id}"
        },
        {
          "name": "formattedData",
          "value": null,
          "properties": [
            {
              "name": "oauthVerifier",
              "value": "{openAuthPopup.oauth_verifier}"
            }
          ]
        }
      ]
    },
    {
      "step": 5,
      "type": "mutation",
      "name": "verifyConnection",
      "arguments": [
        {
          "name": "id",
          "value": "{createConnection.id}"
        }
      ]
    }
  ],
  "reconnectionSteps": [
    {
      "step": 1,
      "type": "mutation",
      "name": "resetConnection",
      "arguments": [
        {
          "name": "id",
          "value": "{connection.id}"
        }
      ]
    },
    {
      "step": 2,
      "type": "mutation",
      "name": "updateConnection",
      "arguments": [
        {
          "name": "id",
          "value": "{connection.id}"
        },
        {
          "name": "formattedData",
          "value": null,
          "properties": [
            {
              "name": "consumerKey",
              "value": "{fields.consumerKey}"
            },
            {
              "name": "consumerSecret",
              "value": "{fields.consumerSecret}"
            }
          ]
        }
      ]
    },
    {
      "step": 3,
      "type": "mutation",
      "name": "createAuthData",
      "arguments": [
        {
          "name": "id",
          "value": "{connection.id}"
        }
      ]
    },
    {
      "step": 4,
      "type": "openWithPopup",
      "name": "openAuthPopup",
      "arguments": [
        {
          "name": "url",
          "value": "{createAuthData.url}"
        }
      ]
    },
    {
      "step": 5,
      "type": "mutation",
      "name": "updateConnection",
      "arguments": [
        {
          "name": "id",
          "value": "{connection.id}"
        },
        {
          "name": "formattedData",
          "value": null,
          "properties": [
            {
              "name": "oauthVerifier",
              "value": "{openAuthPopup.oauth_verifier}"
            }
          ]
        }
      ]
    },
    {
      "step": 6,
      "type": "mutation",
      "name": "verifyConnection",
      "arguments": [
        {
          "name": "id",
          "value": "{connection.id}"
        }
      ]
    }
  ],
  "triggers": [
    {
      "name": "My Tweets",
      "key": "myTweets",
      "description": "Will be triggered when you tweet something new.",
      "substeps": [
        {
          "key": "chooseConnection",
          "name": "Choose connection"
        },
        {
          "key": "testStep",
          "name": "Test trigger"
        }
      ]
    },
    {
      "name": "User Tweets",
      "key": "userTweets",
      "description": "Will be triggered when a specific user tweet something new.",
      "substeps": [
        {
          "key": "chooseConnection",
          "name": "Choose connection"
        },
        {
          "key": "chooseTrigger",
          "name": "Set up a trigger",
          "arguments": [
            {
              "label": "Username",
              "key": "username",
              "type": "string",
              "required": true
            }
          ]
        },
        {
          "key": "testStep",
          "name": "Test trigger"
        }
      ]
    },
    {
      "name": "Search Tweets",
      "key": "searchTweets",
      "description": "Will be triggered when any user tweet something containing a specific keyword, phrase, username or hashtag.",
      "substeps": [
        {
          "key": "chooseConnection",
          "name": "Choose connection"
        },
        {
          "key": "chooseTrigger",
          "name": "Set up a trigger",
          "arguments": [
            {
              "label": "Search Term",
              "key": "searchTerm",
              "type": "string",
              "required": true
            }
          ]
        },
        {
          "key": "testStep",
          "name": "Test trigger"
        }
      ]
    },
    {
      "name": "New follower of me",
      "key": "myFollowers",
      "description": "Will be triggered when you have a new follower.",
      "substeps": [
        {
          "key": "chooseConnection",
          "name": "Choose connection"
        },
        {
          "key": "testStep",
          "name": "Test trigger"
        }
      ]
    }
  ],
  "actions": [
    {
      "name": "Create Tweet",
      "key": "createTweet",
      "description": "Will create a tweet.",
      "substeps": [
        {
          "key": "chooseConnection",
          "name": "Choose connection"
        },
        {
          "key": "chooseAction",
          "name": "Set up action",
          "arguments": [
            {
              "label": "Tweet body",
              "key": "tweet",
              "type": "string",
              "required": true,
              "description": "The content of your new tweet.",
              "variables": true
            }
          ]
        },
        {
          "key": "testStep",
          "name": "Test action"
        }
      ]
    }
  ]
}
